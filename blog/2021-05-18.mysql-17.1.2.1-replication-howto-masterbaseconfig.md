17.1.2.1 [设置复制源配置](https://dev.mysql.com/doc/refman/8.0/en/replication-howto-masterbaseconfig.html)
===
[fdj32.github.io](https://fdj32.github.io)  
要将源配置为使用基于二进制日志文件位置的复制，必须确保启用了二进制日志记录，并建立唯一的服务器ID。

复制拓扑中的每台服务器都必须配置一个唯一的服务器ID，您可以使用server_id系统变量指定该ID。此服务器ID用于标识复制拓扑中的各个服务器，并且必须是介于1和（2^32−1）之间的正整数.MySQL 8.0的默认服务器id值是1。您可以通过发出如下语句动态更改server_id值：
```
SET GLOBAL server_id = 2;
```
您可以选择如何组织和选择服务器ID，只要每个服务器ID不同于复制拓扑中任何其他服务器使用的其他服务器ID。请注意，如果以前为服务器ID设置了值0（在早期版本中是默认值），则必须重新启动服务器才能使用新的非零服务器ID初始化源。否则，更改服务器ID时不需要重新启动服务器，除非您进行了其他需要重新启动的配置更改。

源上需要二进制日志记录，因为二进制日志是将更改从源复制到其副本的基础。默认情况下启用二进制日志记录（log_bin系统变量设置为ON）。--log-bin选项告诉服务器二进制日志文件要使用什么基名称。建议您指定此选项为二进制日志文件提供一个非默认的基名称，这样，如果主机名更改，您就可以轻松地继续使用相同的二进制日志文件名（请参阅[第B.3.7节“MySQL中的已知问题”](https://dev.mysql.com/doc/refman/8.0/en/known-issues.html)）。如果以前在源上使用--skip-log-bin选项禁用了二进制日志记录，则必须在不使用此选项的情况下重新启动服务器才能启用它。
```
注意

以下选项也会对源产生影响：

为了在使用InnoDB 带事务的复制设置中尽可能持久和一致，您应该在源的my.cnf文件中使用innodb_flush_log_at_trx_commit=1，并同步sync_binlog=1。

确保源上未启用skip_networking系统变量。如果网络已禁用，则复制副本无法与源通信，复制失败。
```